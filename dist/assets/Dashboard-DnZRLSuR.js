import{c as u,j as e,f as h,b as k,r as m,g as A}from"./index-HP-iplJH.js";import{C as c,a as d,b as o,c as i,Q as T}from"./queryKeys-BQvMjTHe.js";import{u as C,T as x,U as P,D as E,S as R,a as I,b as D,c as $,d as q}from"./useBranches-C0c4YbNX.js";import{P as g}from"./package-BPev8DMd.js";import"./apiEndpoints-DpVCCeQ4.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=u("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=u("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=u("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),O=()=>e.jsx(e.Fragment,{children:e.jsxs(c,{className:"shadow-md",children:[e.jsx(d,{children:e.jsx(o,{children:"Recent Activity"})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:[{action:"Sale completed",patient:"Ram Sharma",amount:"NPR 1,250",time:"5 minutes ago"},{action:"Product added",item:"Paracetamol 500mg",quantity:"100 units",time:"12 minutes ago"},{action:"Low stock alert",item:"Amoxicillin 250mg",quantity:"5 units left",time:"1 hour ago"},{action:"New patient",patient:"Sita Poudel",phone:"9841234567",time:"2 hours ago"}].map((t,r)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:t.action}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.patient&&`Patient: ${t.patient}`,t.item&&`Item: ${t.item}`,t.phone&&`Phone: ${t.phone}`,t.amount&&` • Amount: ${t.amount}`,t.quantity&&` • ${t.quantity}`]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:t.time})]},r))})})]})}),Q=()=>{const{lowStock:t,outOfStock:r}=h(),l=k();return e.jsxs(e.Fragment,{children:[e.jsxs(c,{className:"bg-gradient-primary text-primary-foreground shadow-lg",onClick:()=>l("billing"),children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(p,{className:"h-5 w-5"}),e.jsx("span",{children:"Quick Sale"})]})}),e.jsxs(i,{children:[e.jsx("p",{className:"text-primary-foreground/80 mb-4",children:"Start a new sale transaction quickly"}),e.jsx("button",{className:"bg-primary-foreground text-primary px-4 py-2 rounded-lg font-medium hover:bg-primary-foreground/90 transition-colors",children:"New Sale"})]})]}),e.jsxs(c,{className:"bg-gradient-secondary text-secondary-foreground shadow-lg",children:[e.jsx(d,{children:e.jsxs(o,{className:"flex items-center space-x-2",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx("span",{children:"Inventory Alert"})]})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-white border border-yellow-200 text-yellow-800 rounded-lg px-4 py-3 w-full sm:w-1/2",children:[e.jsx(M,{className:"h-5 w-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",children:[t??0," product",(t??0)!==1?"s":""," low on stock"]}),e.jsx("p",{className:"text-xs text-yellow-800",children:"Reorder soon"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-white border border-red-200 text-red-600 rounded-lg px-4 py-3 w-full sm:w-1/2",children:[e.jsx(B,{className:"h-5 w-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-semibold",children:[r??0," product",(r??0)!==1?"s":""," ","out of stock"]}),e.jsx("p",{className:"text-xs text-red-600",children:"Needs urgent restock"})]})]})]})})]})]})};var n=(t=>(t.Positive="POSITIVE",t.Negative="NEGATIVE",t.Neutral="NEUTRAL",t))(n||{});function G(){const[t,r]=m.useState(null),{branches:l,branchLoading:j}=C(),{setLowStock:f,setOutOfStock:N}=h();m.useEffect(()=>{l.length>0&&t===null&&r(l[0].value)},[l]);const b=t!==null,{data:a}=A(T.GET_DASHBOARD_HEADER_DATA(t),{retry:0,enabled:b});m.useEffect(()=>{a?.data&&(f(a.data.lowStock),N(a.data.outOfStock))},[a]);const y=[{title:"Today's Sales",value:a?.data?.todaySales,icon:p,trend:a?.data?.todaySalesTrend},{title:"Monthly Revenue",value:a?.data?.monthlySales,icon:x,trend:a?.data?.monthlySalesTrend},{title:"Weekly Revenue",value:a?.data?.weeklySales,icon:x,trend:a?.data?.weeklySalesTrend},{title:"Products in Stock",value:a?.data?.productStock,icon:g},{title:"Active Patients",value:a?.data?.activePatients,icon:P},{title:"VAT Collected",value:a?.data?.vatAmount,icon:E}],w=s=>{switch(s){case n.Positive:return"text-success";case n.Negative:return"text-warning";case n.Neutral:return"text-muted-foreground";default:return"text-muted-foreground"}},v=s=>{switch(s){case n.Positive:return"bg-success-light";case n.Negative:return"bg-warning-light";case n.Neutral:return"bg-muted";default:return"bg-muted"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[" ",e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Dashboard"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Welcome to Appointment & Queue Management System"})]}),e.jsxs("div",{className:"w-64",children:[" ",e.jsxs(R,{value:t!==null?String(t):void 0,onValueChange:s=>r(Number(s)),disabled:j,children:[e.jsx(I,{children:e.jsx(D,{placeholder:"Select branch"})}),e.jsx($,{children:l.map(s=>e.jsx(q,{value:String(s.value),children:s.label},s.value))})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(s=>{const S=s.icon;return e.jsxs(c,{className:"bg-gradient-card border-border shadow-md",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground",children:s.title}),e.jsx("div",{className:`p-2 rounded-lg ${v(s.trend)}`,children:e.jsx(S,{className:`h-4 w-4 ${w(s.trend)}`})})]}),e.jsx(i,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:Math.round(s.value??0)})})]},s.title)})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsx(Q,{})}),e.jsx(O,{})]})}export{G as default};
